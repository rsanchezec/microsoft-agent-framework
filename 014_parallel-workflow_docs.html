<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentaci√≥n: Workflow Paralelo con Microsoft Agent Framework</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        h2 {
            color: #f5576c;
            margin-top: 30px;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #f5576c;
            padding-bottom: 10px;
        }

        h3 {
            color: #f093fb;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        h4 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .diagram-container {
            background: #fff5f8;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #f5576c;
        }

        .diagram-title {
            text-align: center;
            font-weight: bold;
            color: #f5576c;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .parallel-flow {
            display: flex;
            gap: 30px;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
        }

        .parallel-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .flow-box {
            background: white;
            border: 3px solid #f5576c;
            border-radius: 8px;
            padding: 20px 30px;
            min-width: 180px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .flow-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .flow-box.start {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-color: #84fab0;
        }

        .flow-box.agent {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            font-weight: bold;
        }

        .flow-box.parallel-agent {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        .flow-box.output {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            border-color: #fa709a;
            color: white;
        }

        .arrow {
            font-size: 2em;
            color: #f5576c;
            font-weight: bold;
        }

        .arrow-down {
            font-size: 2em;
            color: #f5576c;
            font-weight: bold;
            display: block;
            text-align: center;
            margin: 10px 0;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #f5576c;
        }

        .code-block code {
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.5;
            white-space: pre-wrap;
            display: block;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            color: #856404;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .parallel-box {
            background: #f3e5f5;
            border-left: 4px solid #9c27b0;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .component-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .component-card:hover {
            border-color: #f5576c;
            box-shadow: 0 4px 16px rgba(245, 87, 108, 0.3);
        }

        .component-card h4 {
            color: #f5576c;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        th {
            background: #f5576c;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        tr:hover {
            background: #fff5f8;
        }

        .execution-flow {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .step {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
            padding: 15px;
            background: #fff5f8;
            border-radius: 8px;
            border-left: 4px solid #f5576c;
        }

        .step-number {
            background: #f5576c;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex-grow: 1;
        }

        .step-title {
            font-weight: bold;
            color: #f5576c;
            margin-bottom: 5px;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .architecture-diagram {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }

        .layer {
            background: white;
            border: 2px solid #f5576c;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .layer-title {
            font-weight: bold;
            color: #f5576c;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .footer {
            background: #2d2d2d;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .toc {
            background: #fff5f8;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .toc h3 {
            color: #f5576c;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc li {
            margin-bottom: 10px;
        }

        .toc a {
            color: #f5576c;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toc a:hover {
            color: #f093fb;
            text-decoration: underline;
        }

        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .comparison-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .comparison-card h4 {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f5576c;
        }

        @media (max-width: 768px) {
            .flow-diagram, .parallel-flow {
                flex-direction: column;
            }

            .arrow {
                transform: rotate(90deg);
            }

            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .comparison-table {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåê Workflow Paralelo con Microsoft Agent Framework</h1>
            <p>Documentaci√≥n Completa del Script 014_parallel-workflow.py</p>
        </header>

        <div class="content">
            <!-- Tabla de Contenidos -->
            <div class="toc">
                <h3>üìë Tabla de Contenidos</h3>
                <ul>
                    <li><a href="#introduccion">1. Introducci√≥n</a></li>
                    <li><a href="#conceptos">2. Conceptos Clave: Fan-Out y Fan-In</a></li>
                    <li><a href="#arquitectura">3. Arquitectura del Sistema</a></li>
                    <li><a href="#componentes">4. Componentes Principales (5 Agentes)</a></li>
                    <li><a href="#flujo">5. Flujo de Ejecuci√≥n Paralela</a></li>
                    <li><a href="#codigo">6. An√°lisis del C√≥digo</a></li>
                    <li><a href="#comparacion">7. Secuencial vs Paralelo</a></li>
                    <li><a href="#mejores-practicas">8. Mejores Pr√°cticas</a></li>
                </ul>
            </div>

            <!-- 1. Introducci√≥n -->
            <h2 id="introduccion">1. üìñ Introducci√≥n</h2>
            <p>
                El script <span class="highlight">014_parallel-workflow.py</span> demuestra c√≥mo crear un
                <strong>workflow paralelo</strong> utilizando el <strong>Microsoft Agent Framework</strong> con
                <strong>Azure AI Foundry</strong>. A diferencia de un workflow secuencial donde los agentes se ejecutan
                uno despu√©s del otro, un workflow paralelo permite que <strong>m√∫ltiples agentes procesen informaci√≥n
                simult√°neamente</strong>, mejorando significativamente la eficiencia y reduciendo el tiempo de ejecuci√≥n.
            </p>

            <div class="parallel-box">
                <strong>üöÄ Ventaja Clave:</strong> En este ejemplo, <strong>3 agentes trabajan en paralelo</strong>,
                lo que significa que en lugar de esperar a que cada uno termine secuencialmente, todos procesan
                informaci√≥n al mismo tiempo. Esto es especialmente √∫til cuando las tareas son independientes entre s√≠.
            </div>

            <div class="info-box">
                <strong>üí° Caso de Uso Real:</strong> Planificador de vacaciones inteligente
                <ul>
                    <li><strong>Input:</strong> Usuario solicita ayuda para planear vacaciones a Espa√±a</li>
                    <li><strong>Fase 1:</strong> Location Selector procesa y extrae informaci√≥n clave</li>
                    <li><strong>Fase 2 (Paralela):</strong> Tres agentes trabajan simult√°neamente:
                        <ul>
                            <li>üéØ <strong>Destination Recommender</strong> - Investiga destinos tur√≠sticos</li>
                            <li>üå§Ô∏è <strong>Weather Agent</strong> - Obtiene informaci√≥n del clima</li>
                            <li>üçΩÔ∏è <strong>Cuisine Suggestion</strong> - Investiga gastronom√≠a local</li>
                        </ul>
                    </li>
                    <li><strong>Fase 3:</strong> Itinerary Planner combina toda la informaci√≥n y crea un itinerario completo</li>
                </ul>
            </div>

            <!-- Diagrama de Flujo Principal -->
            <div class="diagram-container">
                <div class="diagram-title">üîÑ Flujo Paralelo Completo</div>
                <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                    <!-- Input -->
                    <div class="flow-box start">
                        <strong>üì• Input</strong><br>
                        <small>"Ay√∫dame a planear<br>vacaciones a Espa√±a"</small>
                    </div>

                    <span class="arrow-down">‚Üì</span>

                    <!-- Location Selector -->
                    <div class="flow-box agent">
                        <strong>üìç Location Selector</strong><br>
                        <small>Procesa solicitud y extrae info</small>
                    </div>

                    <span class="arrow-down">‚Üì</span>
                    <div style="font-weight: bold; color: #f5576c; padding: 10px; background: #fff5f8; border-radius: 8px;">
                        üåü FAN-OUT: Los datos se distribuyen a 3 agentes en paralelo
                    </div>
                    <span class="arrow-down">‚Üì</span>

                    <!-- Fase Paralela -->
                    <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                        <div class="flow-box parallel-agent">
                            <strong>üéØ Destination</strong><br>
                            <small>Recomienda destinos</small>
                        </div>
                        <div class="flow-box parallel-agent">
                            <strong>üå§Ô∏è Weather</strong><br>
                            <small>Info del clima</small>
                        </div>
                        <div class="flow-box parallel-agent">
                            <strong>üçΩÔ∏è Cuisine</strong><br>
                            <small>Gastronom√≠a local</small>
                        </div>
                    </div>

                    <span class="arrow-down">‚Üì</span>
                    <div style="font-weight: bold; color: #f5576c; padding: 10px; background: #fff5f8; border-radius: 8px;">
                        üéØ FAN-IN: Los 3 resultados se combinan en uno
                    </div>
                    <span class="arrow-down">‚Üì</span>

                    <!-- Itinerary Planner -->
                    <div class="flow-box agent">
                        <strong>üìã Itinerary Planner</strong><br>
                        <small>Combina todo y crea itinerario</small>
                    </div>

                    <span class="arrow-down">‚Üì</span>

                    <!-- Output -->
                    <div class="flow-box output">
                        <strong>üì§ Output</strong><br>
                        <small>Itinerario completo de viaje</small>
                    </div>
                </div>
            </div>

            <!-- 2. Conceptos Clave -->
            <h2 id="conceptos">2. üß† Conceptos Clave: Fan-Out y Fan-In</h2>

            <div class="component-grid">
                <div class="component-card">
                    <h4>üåü Fan-Out (Distribuci√≥n)</h4>
                    <p>
                        <strong>Definici√≥n:</strong> Un solo executor env√≠a sus datos a <strong>m√∫ltiples executors</strong>
                        que se ejecutan en <strong>paralelo</strong>.
                    </p>
                    <div style="text-align: center; margin: 15px 0; font-size: 1.5em;">
                        1 ‚Üí [A, B, C]
                    </div>
                    <p>
                        <strong>En nuestro ejemplo:</strong> Location Selector env√≠a informaci√≥n simult√°neamente a
                        Destination Recommender, Weather Agent y Cuisine Suggestion.
                    </p>
                    <p style="margin-top: 10px;">
                        <strong>C√≥digo:</strong><br>
                        <span class="highlight">.add_fan_out_edges(origen, [dest1, dest2, dest3])</span>
                    </p>
                </div>

                <div class="component-card">
                    <h4>üéØ Fan-In (Agregaci√≥n)</h4>
                    <p>
                        <strong>Definici√≥n:</strong> M√∫ltiples executors env√≠an sus resultados a <strong>un solo executor</strong>
                        que los <strong>combina</strong>.
                    </p>
                    <div style="text-align: center; margin: 15px 0; font-size: 1.5em;">
                        [A, B, C] ‚Üí 1
                    </div>
                    <p>
                        <strong>En nuestro ejemplo:</strong> Los resultados de Destination, Weather y Cuisine se combinan
                        en el Itinerary Planner.
                    </p>
                    <p style="margin-top: 10px;">
                        <strong>C√≥digo:</strong><br>
                        <span class="highlight">.add_fan_in_edges([orig1, orig2, orig3], destino)</span>
                    </p>
                </div>

                <div class="component-card">
                    <h4>‚ö° Ejecuci√≥n Paralela</h4>
                    <p>
                        Los agentes en la fase fan-out se ejecutan <strong>simult√°neamente</strong>, no esperan
                        a que el anterior termine.
                    </p>
                    <div style="margin: 15px 0;">
                        <strong>Secuencial:</strong> A (5s) ‚Üí B (5s) ‚Üí C (5s) = <span style="color: #f5576c;">15 segundos</span><br>
                        <strong>Paralelo:</strong> [A, B, C] (5s cada uno) = <span style="color: #28a745;">5 segundos</span>
                    </div>
                    <p>
                        <strong>Ventaja:</strong> Hasta <strong>3x m√°s r√°pido</strong> en este ejemplo.
                    </p>
                </div>

                <div class="component-card">
                    <h4>üì¶ Lista de Resultados</h4>
                    <p>
                        El executor de fan-in recibe un <span class="highlight">list[str]</span> con todos
                        los resultados de los executors paralelos.
                    </p>
                    <div class="code-block" style="margin-top: 10px;"><code>async def itinerary_planner(
    results: list[str],  # ‚Üê Lista con 3 resultados
    ctx: WorkflowContext[str]
):</code></div>
                    <p>
                        <strong>Diferencia con secuencial:</strong> En workflows secuenciales, cada executor
                        recibe solo <span class="highlight">str</span> (un resultado).
                    </p>
                </div>

                <div class="component-card">
                    <h4>üîó WorkflowBuilder Paralelo</h4>
                    <p>
                        Usa m√©todos especiales para construir flujos paralelos:
                    </p>
                    <ul style="margin-top: 10px;">
                        <li><span class="highlight">.add_fan_out_edges()</span> - Define distribuci√≥n</li>
                        <li><span class="highlight">.add_fan_in_edges()</span> - Define agregaci√≥n</li>
                        <li><span class="highlight">.set_start_executor()</span> - Define inicio</li>
                    </ul>
                </div>

                <div class="component-card">
                    <h4>üèóÔ∏è Cierre Manual de Recursos</h4>
                    <p>
                        Este script usa el mismo patr√≥n de <span class="highlight">013_sequential_workflow.py</span>:
                    </p>
                    <ul style="margin-top: 10px;">
                        <li>Todos los agentes activos simult√°neamente</li>
                        <li>Lista <span class="highlight">clients = []</span> para rastrear</li>
                        <li>Cierre manual con <span class="highlight">__aexit__()</span></li>
                        <li>Bloque <span class="highlight">try/finally</span> garantiza limpieza</li>
                    </ul>
                </div>
            </div>

            <!-- Diagrama Conceptual de Fan-Out/Fan-In -->
            <div class="diagram-container">
                <div class="diagram-title">üîÑ Concepto Visual: Fan-Out y Fan-In</div>
                <div style="background: white; padding: 30px; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 40px;">
                        <!-- Fan-Out -->
                        <div style="text-align: center;">
                            <h4 style="color: #f5576c; margin-bottom: 20px;">üåü Fan-Out (1 ‚Üí N)</h4>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
                                <div style="background: #f5576c; color: white; padding: 15px 30px; border-radius: 8px; font-weight: bold;">
                                    Origen
                                </div>
                                <div style="font-size: 2em;">‚Üì</div>
                                <div style="display: flex; gap: 10px;">
                                    <div style="background: #667eea; color: white; padding: 10px 20px; border-radius: 8px;">A</div>
                                    <div style="background: #667eea; color: white; padding: 10px 20px; border-radius: 8px;">B</div>
                                    <div style="background: #667eea; color: white; padding: 10px 20px; border-radius: 8px;">C</div>
                                </div>
                            </div>
                            <p style="margin-top: 15px; font-size: 0.9em;">
                                <strong>Distribuci√≥n:</strong> Datos se env√≠an<br>a m√∫ltiples destinos en paralelo
                            </p>
                        </div>

                        <!-- Fan-In -->
                        <div style="text-align: center;">
                            <h4 style="color: #f5576c; margin-bottom: 20px;">üéØ Fan-In (N ‚Üí 1)</h4>
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
                                <div style="display: flex; gap: 10px;">
                                    <div style="background: #667eea; color: white; padding: 10px 20px; border-radius: 8px;">A</div>
                                    <div style="background: #667eea; color: white; padding: 10px 20px; border-radius: 8px;">B</div>
                                    <div style="background: #667eea; color: white; padding: 10px 20px; border-radius: 8px;">C</div>
                                </div>
                                <div style="font-size: 2em;">‚Üì</div>
                                <div style="background: #f5576c; color: white; padding: 15px 30px; border-radius: 8px; font-weight: bold;">
                                    Destino
                                </div>
                            </div>
                            <p style="margin-top: 15px; font-size: 0.9em;">
                                <strong>Agregaci√≥n:</strong> M√∫ltiples resultados<br>se combinan en uno
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Arquitectura del Sistema -->
            <h2 id="arquitectura">3. üèóÔ∏è Arquitectura del Sistema (5 Agentes)</h2>

            <div class="architecture-diagram">
                <div class="layer">
                    <div class="layer-title">üîê Capa de Autenticaci√≥n</div>
                    <p><strong>DefaultAzureCredential</strong></p>
                    <p>Gestiona la autenticaci√≥n con Azure usando credenciales del sistema</p>
                </div>

                <div class="layer">
                    <div class="layer-title">üîå Capa de Clientes (5 Clientes Independientes)</div>
                    <p><strong>5 √ó AzureAIAgentClient</strong></p>
                    <p>Cada uno de los 5 agentes tiene su propio cliente para mantener sesiones separadas</p>
                    <div class="code-block"><code># Cada agente obtiene su propio cliente
location_client = AzureAIAgentClient(async_credential=credential)
destination_client = AzureAIAgentClient(async_credential=credential)
weather_client = AzureAIAgentClient(async_credential=credential)
cuisine_client = AzureAIAgentClient(async_credential=credential)
itinerary_client = AzureAIAgentClient(async_credential=credential)</code></div>
                </div>

                <div class="layer">
                    <div class="layer-title">ü§ñ Capa de Agentes Especializados</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div style="background: #fff5f8; padding: 15px; border-radius: 8px; border: 2px solid #f5576c;">
                            <strong>1Ô∏è‚É£ Location Picker</strong><br>
                            <small>Procesa solicitud inicial</small>
                        </div>
                        <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
                            <strong>2Ô∏è‚É£ Destination Recommender</strong><br>
                            <small>Sugiere destinos tur√≠sticos</small>
                        </div>
                        <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
                            <strong>3Ô∏è‚É£ Weather Agent</strong><br>
                            <small>Informaci√≥n del clima</small>
                        </div>
                        <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
                            <strong>4Ô∏è‚É£ Cuisine Suggestion</strong><br>
                            <small>Gastronom√≠a local</small>
                        </div>
                        <div style="background: #d4edda; padding: 15px; border-radius: 8px; border: 2px solid #28a745;">
                            <strong>5Ô∏è‚É£ Itinerary Planner</strong><br>
                            <small>Combina y crea itinerario</small>
                        </div>
                    </div>
                </div>

                <div class="layer">
                    <div class="layer-title">‚öôÔ∏è Capa de Executors (5 Factories)</div>
                    <p><strong>Factory Functions para Cada Agente</strong></p>
                    <ul>
                        <li><span class="highlight">create_location_selector_executor()</span></li>
                        <li><span class="highlight">create_destination_recommender_executor()</span></li>
                        <li><span class="highlight">create_weather_executor()</span></li>
                        <li><span class="highlight">create_cuisine_suggestion_executor()</span></li>
                        <li><span class="highlight">create_itinerary_planner_executor()</span></li>
                    </ul>
                </div>

                <div class="layer">
                    <div class="layer-title">üîÑ Capa de Workflow Paralelo</div>
                    <p><strong>WorkflowBuilder con Fan-Out y Fan-In</strong></p>
                    <div class="code-block"><code>workflow = (
    WorkflowBuilder()
    .set_start_executor(location_selector)
    .add_fan_out_edges(location_selector, [destination, weather, cuisine])
    .add_fan_in_edges([destination, weather, cuisine], itinerary)
    .build()
)</code></div>
                </div>

                <div class="layer">
                    <div class="layer-title">üìä Capa de Visualizaci√≥n</div>
                    <p><strong>WorkflowViz + Mermaid Diagram</strong></p>
                    <p>Genera visualizaciones del workflow paralelo mostrando las conexiones fan-out y fan-in</p>
                </div>
            </div>

            <!-- 4. Componentes Principales -->
            <h2 id="componentes">4. üî© Componentes Principales (5 Agentes)</h2>

            <h3>4.1. Los 5 Agentes y Sus Roles</h3>

            <div class="component-grid">
                <div class="component-card" style="border-color: #f5576c;">
                    <h4>1Ô∏è‚É£ Location Picker Agent</h4>
                    <p><strong>Rol:</strong> Punto de entrada del workflow</p>
                    <p><strong>Tarea:</strong> Procesa la solicitud del usuario y extrae informaci√≥n clave sobre el destino deseado</p>
                    <div class="code-block" style="margin-top: 10px;"><code>instructions = &quot;&quot;&quot;
Eres un asistente √∫til que ayuda
a los usuarios a elegir una ubicaci√≥n
para sus vacaciones.
&quot;&quot;&quot;</code></div>
                </div>

                <div class="component-card" style="border-color: #2196F3;">
                    <h4>2Ô∏è‚É£ Destination Recommender Agent</h4>
                    <p><strong>Rol:</strong> Experto en turismo (Paralelo)</p>
                    <p><strong>Tarea:</strong> Sugiere destinos tur√≠sticos, atracciones y actividades bas√°ndose en las preferencias del usuario</p>
                    <div class="code-block" style="margin-top: 10px;"><code>instructions = &quot;&quot;&quot;
Eres un experto en viajes que
proporciona recomendaciones
personalizadas de vacaciones.
&quot;&quot;&quot;</code></div>
                </div>

                <div class="component-card" style="border-color: #2196F3;">
                    <h4>3Ô∏è‚É£ Weather Agent</h4>
                    <p><strong>Rol:</strong> Experto en meteorolog√≠a (Paralelo)</p>
                    <p><strong>Tarea:</strong> Proporciona informaci√≥n precisa y actualizada sobre el clima de los destinos seleccionados</p>
                    <div class="code-block" style="margin-top: 10px;"><code>instructions = &quot;&quot;&quot;
Eres un experto en meteorolog√≠a
que proporciona informaci√≥n del
clima para varias ubicaciones.
&quot;&quot;&quot;</code></div>
                </div>

                <div class="component-card" style="border-color: #2196F3;">
                    <h4>4Ô∏è‚É£ Cuisine Suggestion Agent</h4>
                    <p><strong>Rol:</strong> Experto culinario (Paralelo)</p>
                    <p><strong>Tarea:</strong> Sugiere cocina local popular y opciones gastron√≥micas del destino</p>
                    <div class="code-block" style="margin-top: 10px;"><code>instructions = &quot;&quot;&quot;
Eres un experto culinario que
sugiere cocina local y opciones
gastron√≥micas.
&quot;&quot;&quot;</code></div>
                </div>

                <div class="component-card" style="border-color: #28a745;">
                    <h4>5Ô∏è‚É£ Itinerary Planner Agent</h4>
                    <p><strong>Rol:</strong> Planificador maestro (Fan-In)</p>
                    <p><strong>Tarea:</strong> Combina TODOS los resultados (destinos, clima, comida) y crea un itinerario completo y coherente</p>
                    <div class="code-block" style="margin-top: 10px;"><code>instructions = &quot;&quot;&quot;
Eres un experto en planificaci√≥n
que crea itinerarios detallados
basados en toda la informaci√≥n.
&quot;&quot;&quot;</code></div>
                </div>
            </div>

            <h3>4.2. Executor del Fan-In (Clave del Workflow Paralelo)</h3>

            <div class="parallel-box">
                <strong>üéØ Diferencia Cr√≠tica:</strong> El executor del Itinerary Planner recibe una
                <span class="highlight">list[str]</span> con los 3 resultados paralelos, NO un solo string.
            </div>

            <div class="code-block"><code>def create_itinerary_planner_executor(itinerary_planner_agent):
    &quot;&quot;&quot;Factory para el executor que COMBINA resultados paralelos&quot;&quot;&quot;

    @executor(id=&quot;ItineraryPlanner&quot;)
    async def itinerary_planner(
        results: list[str],  # ‚Üê ¬°LISTA! No str
        ctx: WorkflowContext[str]
    ) -&gt; None:
        print(f&quot;\n[ITINERARY PLANNER] Creando itinerario con {len(results)} resultados...&quot;)

        # Combinar los 3 resultados en un solo string
        combined_results = &quot;\n\n&quot;.join(results)

        # Crear prompt que incluye TODA la informaci√≥n
        prompt = f&quot;&quot;&quot;Bas√°ndote en esta informaci√≥n, crea un itinerario detallado:

{combined_results}&quot;&quot;&quot;

        response = await itinerary_planner_agent.run(prompt)
        result = str(response)

        # Producir output final
        await ctx.yield_output(result)

    return itinerary_planner</code></div>

            <div class="info-box">
                <strong>üìù ¬øPor qu√© list[str]?</strong>
                <p>Cuando usas <span class="highlight">.add_fan_in_edges([A, B, C], D)</span>, el framework
                autom√°ticamente:</p>
                <ol>
                    <li>Espera a que los 3 executors (A, B, C) terminen</li>
                    <li>Recolecta sus resultados en una lista</li>
                    <li>Pasa la lista completa al executor D</li>
                </ol>
                <p>Esto es perfecto para agregaci√≥n de informaci√≥n de m√∫ltiples fuentes.</p>
            </div>

            <h3>4.3. Construcci√≥n del Workflow Paralelo</h3>

            <div class="code-block"><code># Crear todos los executors
location_exec = create_location_selector_executor(location_agent)
destination_exec = create_destination_recommender_executor(destination_agent)
weather_exec = create_weather_executor(weather_agent)
cuisine_exec = create_cuisine_suggestion_executor(cuisine_agent)
itinerary_exec = create_itinerary_planner_executor(itinerary_agent)

# Construir workflow con fan-out y fan-in
workflow = (
    WorkflowBuilder()

    # 1. Definir punto de inicio
    .set_start_executor(location_exec)

    # 2. FAN-OUT: location_exec ‚Üí [destination, weather, cuisine]
    .add_fan_out_edges(
        location_exec,
        [destination_exec, weather_exec, cuisine_exec]
    )

    # 3. FAN-IN: [destination, weather, cuisine] ‚Üí itinerary_exec
    .add_fan_in_edges(
        [destination_exec, weather_exec, cuisine_exec],
        itinerary_exec
    )

    # 4. Construir
    .build()
)</code></div>

            <!-- 5. Flujo de Ejecuci√≥n -->
            <h2 id="flujo">5. üîÑ Flujo de Ejecuci√≥n Paralela (Paso a Paso)</h2>

            <div class="execution-flow">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Usuario Env√≠a Consulta</div>
                        <p>El usuario ejecuta el workflow con su solicitud:</p>
                        <div class="code-block"><code>query = &quot;Ay√∫dame a planear unas vacaciones a Espa√±a...&quot;
async for event in workflow.run_stream(query):
    # Procesar eventos</code></div>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Location Selector Procesa (Secuencial)</div>
                        <p>El primer agente recibe y procesa la consulta, extrayendo informaci√≥n clave
                        sobre preferencias y destino. <strong>Este paso es secuencial.</strong></p>
                    </div>
                </div>

                <div class="step" style="border-color: #9c27b0; background: #f3e5f5;">
                    <div class="step-number" style="background: #9c27b0;">3</div>
                    <div class="step-content">
                        <div class="step-title">üåü FAN-OUT: Distribuci√≥n Paralela</div>
                        <p>El resultado del Location Selector se env√≠a <strong>simult√°neamente</strong> a 3 agentes:</p>
                        <ul>
                            <li><strong>Destination Recommender</strong> - Empieza a investigar destinos</li>
                            <li><strong>Weather Agent</strong> - Empieza a buscar informaci√≥n del clima</li>
                            <li><strong>Cuisine Suggestion</strong> - Empieza a investigar gastronom√≠a</li>
                        </ul>
                        <p><strong>‚ö° Los 3 trabajan AL MISMO TIEMPO, no esperan.</strong></p>
                    </div>
                </div>

                <div class="step" style="border-color: #2196F3;">
                    <div class="step-number" style="background: #2196F3;">4</div>
                    <div class="step-content">
                        <div class="step-title">Ejecuci√≥n Paralela de 3 Agentes</div>
                        <p>Cada agente procesa independientemente:</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 10px;">
                            <div style="background: white; padding: 10px; border-radius: 8px; border: 2px solid #667eea;">
                                <strong>üéØ Destination</strong><br>
                                <small>Procesando...</small>
                            </div>
                            <div style="background: white; padding: 10px; border-radius: 8px; border: 2px solid #667eea;">
                                <strong>üå§Ô∏è Weather</strong><br>
                                <small>Procesando...</small>
                            </div>
                            <div style="background: white; padding: 10px; border-radius: 8px; border: 2px solid #667eea;">
                                <strong>üçΩÔ∏è Cuisine</strong><br>
                                <small>Procesando...</small>
                            </div>
                        </div>
                        <p style="margin-top: 10px;"><strong>Si cada uno tarda 5 segundos, el total es ~5 segundos (no 15).</strong></p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">Recolecci√≥n de Resultados</div>
                        <p>El framework espera a que los 3 agentes terminen y recolecta sus resultados en una lista:</p>
                        <div class="code-block"><code>results = [
    &quot;Resultado del Destination Recommender: Madrid, Barcelona...&quot;,
    &quot;Resultado del Weather Agent: Clima c√°lido en verano...&quot;,
    &quot;Resultado del Cuisine Suggestion: Paella, tapas, jam√≥n...&quot;
]</code></div>
                    </div>
                </div>

                <div class="step" style="border-color: #9c27b0; background: #f3e5f5;">
                    <div class="step-number" style="background: #9c27b0;">6</div>
                    <div class="step-content">
                        <div class="step-title">üéØ FAN-IN: Agregaci√≥n de Resultados</div>
                        <p>Los 3 resultados se pasan como una <span class="highlight">list[str]</span>
                        al Itinerary Planner, que los combina:</p>
                        <div class="code-block"><code>async def itinerary_planner(results: list[str], ctx):
    # results tiene 3 elementos
    combined = &quot;\n\n&quot;.join(results)
    # Crear itinerario con toda la informaci√≥n</code></div>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">7</div>
                    <div class="step-content">
                        <div class="step-title">Itinerary Planner Crea Itinerario Final</div>
                        <p>El √∫ltimo agente recibe TODA la informaci√≥n (destinos + clima + comida) y crea
                        un itinerario de viaje completo y coherente.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">8</div>
                    <div class="step-content">
                        <div class="step-title">Output Final</div>
                        <p>El itinerary planner usa <span class="highlight">ctx.yield_output()</span>
                        para producir el resultado final, que se captura en el loop principal:</p>
                        <div class="code-block"><code>if isinstance(event, WorkflowOutputEvent):
    print(event.data)  # Itinerario completo</code></div>
                    </div>
                </div>
            </div>

            <!-- Diagrama de Tiempo -->
            <div class="diagram-container">
                <div class="diagram-title">‚è±Ô∏è Comparaci√≥n de Tiempo: Secuencial vs Paralelo</div>
                <div style="background: white; padding: 20px; border-radius: 8px;">
                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #667eea; margin-bottom: 15px;">Workflow Secuencial (012/013)</h4>
                        <div style="display: flex; gap: 5px;">
                            <div style="background: #667eea; color: white; padding: 20px; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Researcher</strong><br>5s
                            </div>
                            <div style="background: #764ba2; color: white; padding: 20px; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Writer</strong><br>5s
                            </div>
                        </div>
                        <p style="text-align: center; margin-top: 10px; font-weight: bold; color: #667eea;">
                            Total: 10 segundos (5 + 5)
                        </p>
                    </div>

                    <div>
                        <h4 style="color: #f5576c; margin-bottom: 15px;">Workflow Paralelo (014) ‚ö°</h4>
                        <div style="margin-bottom: 10px;">
                            <div style="background: #f5576c; color: white; padding: 20px; border-radius: 8px; text-align: center; margin-bottom: 5px;">
                                <strong>Location Selector</strong><br>5s
                            </div>
                        </div>
                        <div style="display: flex; gap: 5px; margin-bottom: 5px;">
                            <div style="background: #667eea; color: white; padding: 20px; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Destination</strong><br>5s
                            </div>
                            <div style="background: #667eea; color: white; padding: 20px; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Weather</strong><br>5s
                            </div>
                            <div style="background: #667eea; color: white; padding: 20px; border-radius: 8px; flex: 1; text-align: center;">
                                <strong>Cuisine</strong><br>5s
                            </div>
                        </div>
                        <div>
                            <div style="background: #28a745; color: white; padding: 20px; border-radius: 8px; text-align: center;">
                                <strong>Itinerary Planner</strong><br>5s
                            </div>
                        </div>
                        <p style="text-align: center; margin-top: 10px; font-weight: bold; color: #28a745;">
                            Total: 15 segundos (5 + 5 + 5) - ¬°3 en paralelo cuentan como 5!
                        </p>
                        <p style="text-align: center; margin-top: 5px; font-style: italic;">
                            Comparado con secuencial: 5 + 5 + 5 + 5 + 5 = 25 segundos
                        </p>
                    </div>
                </div>
            </div>

            <!-- 6. An√°lisis del C√≥digo -->
            <h2 id="codigo">6. üíª An√°lisis del C√≥digo</h2>

            <h3>6.1. M√©todos Clave del WorkflowBuilder Paralelo</h3>

            <table>
                <thead>
                    <tr>
                        <th>M√©todo</th>
                        <th>Prop√≥sito</th>
                        <th>Ejemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="highlight">.set_start_executor()</span></td>
                        <td>Define el executor inicial</td>
                        <td><code>.set_start_executor(location_exec)</code></td>
                    </tr>
                    <tr>
                        <td><span class="highlight">.add_fan_out_edges()</span></td>
                        <td>Define distribuci√≥n paralela (1 ‚Üí N)</td>
                        <td><code>.add_fan_out_edges(A, [B, C, D])</code></td>
                    </tr>
                    <tr>
                        <td><span class="highlight">.add_fan_in_edges()</span></td>
                        <td>Define agregaci√≥n (N ‚Üí 1)</td>
                        <td><code>.add_fan_in_edges([B, C, D], E)</code></td>
                    </tr>
                    <tr>
                        <td><span class="highlight">.build()</span></td>
                        <td>Construye el workflow final</td>
                        <td><code>.build()</code></td>
                    </tr>
                </tbody>
            </table>

            <h3>6.2. Diferencias con Workflow Secuencial</h3>

            <div class="comparison-table">
                <div class="comparison-card">
                    <h4 style="color: #667eea;">Secuencial (012/013)</h4>
                    <div class="code-block"><code># Conexi√≥n simple A ‚Üí B
workflow = (
    WorkflowBuilder()
    .add_edge(
        researcher_exec,
        writer_exec
    )
    .set_start_executor(
        researcher_exec
    )
    .build()
)</code></div>
                    <ul style="margin-top: 15px;">
                        <li>Un solo <span class="highlight">.add_edge()</span></li>
                        <li>Ejecutores en cadena</li>
                        <li>Cada uno recibe <span class="highlight">str</span></li>
                    </ul>
                </div>

                <div class="comparison-card">
                    <h4 style="color: #f5576c;">Paralelo (014)</h4>
                    <div class="code-block"><code># Fan-out + Fan-in
workflow = (
    WorkflowBuilder()
    .set_start_executor(
        location_exec
    )
    .add_fan_out_edges(
        location_exec,
        [dest_exec, weather_exec, cuisine_exec]
    )
    .add_fan_in_edges(
        [dest_exec, weather_exec, cuisine_exec],
        itinerary_exec
    )
    .build()
)</code></div>
                    <ul style="margin-top: 15px;">
                        <li><span class="highlight">.add_fan_out_edges()</span> + <span class="highlight">.add_fan_in_edges()</span></li>
                        <li>Ejecutores en paralelo</li>
                        <li>Fan-in recibe <span class="highlight">list[str]</span></li>
                    </ul>
                </div>
            </div>

            <!-- 7. Comparaci√≥n -->
            <h2 id="comparacion">7. üìä Secuencial vs Paralelo: Comparaci√≥n Completa</h2>

            <table>
                <thead>
                    <tr>
                        <th>Aspecto</th>
                        <th>Secuencial (012/013)</th>
                        <th>Paralelo (014)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>N√∫mero de Agentes</strong></td>
                        <td>2 agentes</td>
                        <td>5 agentes</td>
                    </tr>
                    <tr>
                        <td><strong>Patr√≥n de Flujo</strong></td>
                        <td>Lineal: A ‚Üí B</td>
                        <td>Red: A ‚Üí [B,C,D] ‚Üí E</td>
                    </tr>
                    <tr>
                        <td><strong>Ejecuci√≥n</strong></td>
                        <td>Secuencial (uno tras otro)</td>
                        <td>Paralela (3 simult√°neos)</td>
                    </tr>
                    <tr>
                        <td><strong>M√©todos Builder</strong></td>
                        <td><span class="highlight">.add_edge()</span></td>
                        <td><span class="highlight">.add_fan_out_edges()</span> + <span class="highlight">.add_fan_in_edges()</span></td>
                    </tr>
                    <tr>
                        <td><strong>Input √öltimo Executor</strong></td>
                        <td><span class="highlight">str</span> (un resultado)</td>
                        <td><span class="highlight">list[str]</span> (m√∫ltiples)</td>
                    </tr>
                    <tr>
                        <td><strong>Tiempo (ejemplo)</strong></td>
                        <td>5s + 5s = 10s</td>
                        <td>5s + 5s (paralelo) + 5s = 15s</td>
                    </tr>
                    <tr>
                        <td><strong>Ventaja Principal</strong></td>
                        <td>Simple, f√°cil de entender</td>
                        <td>M√°s r√°pido, eficiente</td>
                    </tr>
                    <tr>
                        <td><strong>Caso de Uso</strong></td>
                        <td>Tareas dependientes</td>
                        <td>Tareas independientes</td>
                    </tr>
                    <tr>
                        <td><strong>Gesti√≥n de Recursos</strong></td>
                        <td>012: Autom√°tico, 013: Manual</td>
                        <td>Manual (como 013)</td>
                    </tr>
                </tbody>
            </table>

            <!-- 8. Mejores Pr√°cticas -->
            <h2 id="mejores-practicas">8. ‚ú® Mejores Pr√°cticas para Workflows Paralelos</h2>

            <h3>8.1. ¬øCu√°ndo Usar Workflows Paralelos?</h3>

            <div class="success-box">
                <strong>‚úÖ Usar Paralelo Cuando:</strong>
                <ul>
                    <li>Las tareas son <strong>independientes</strong> entre s√≠</li>
                    <li>No hay dependencias de datos entre los executors paralelos</li>
                    <li>Quieres <strong>mejorar el rendimiento</strong> y reducir tiempo de ejecuci√≥n</li>
                    <li>Necesitas <strong>recopilar informaci√≥n de m√∫ltiples fuentes</strong></li>
                    <li>Ejemplos: B√∫squedas m√∫ltiples, validaciones paralelas, agregaci√≥n de datos</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>‚ùå NO Usar Paralelo Cuando:</strong>
                <ul>
                    <li>Una tarea <strong>depende del resultado</strong> de otra</li>
                    <li>El orden de ejecuci√≥n es importante</li>
                    <li>Hay efectos secundarios que pueden causar <strong>condiciones de carrera</strong></li>
                    <li>Compartir recursos modificables (bases de datos, archivos, etc.)</li>
                </ul>
            </div>

            <h3>8.2. Dise√±o de Executors en Fan-In</h3>

            <div class="parallel-box">
                <strong>üéØ Clave:</strong> El executor de fan-in debe manejar una <span class="highlight">list[str]</span>
            </div>

            <div class="code-block"><code># ‚úÖ CORRECTO: Acepta list[str]
@executor(id=&quot;aggregator&quot;)
async def aggregator(results: list[str], ctx: WorkflowContext[str]) -&gt; None:
    # Combinar resultados
    combined = &quot;\n\n&quot;.join(results)

    # Procesar informaci√≥n combinada
    response = await agent.run(f&quot;Analiza: {combined}&quot;)

    await ctx.yield_output(str(response))


# ‚ùå INCORRECTO: Acepta str (causar√° error)
@executor(id=&quot;aggregator&quot;)
async def aggregator(result: str, ctx: WorkflowContext[str]) -&gt; None:
    # Esto fallar√° en fan-in
    pass</code></div>

            <h3>8.3. Gesti√≥n de Errores en Workflows Paralelos</h3>

            <div class="info-box">
                <strong>üí° Consideraci√≥n Importante:</strong>
                <p>Si uno de los executors paralelos falla, el workflow completo puede fallar. Considera:</p>
                <ul>
                    <li>Implementar <strong>try/catch</strong> dentro de cada executor</li>
                    <li>Retornar valores por defecto o mensajes de error</li>
                    <li>El fan-in puede verificar si hay errores en la lista de resultados</li>
                </ul>
            </div>

            <div class="code-block"><code>@executor(id=&quot;robust_executor&quot;)
async def robust_executor(data: str, ctx: WorkflowContext[str]) -&gt; None:
    try:
        # Intentar procesar
        response = await agent.run(data)
        await ctx.send_message(str(response))
    except Exception as e:
        # Enviar mensaje de error en lugar de fallar
        error_msg = f&quot;Error en {executor_id}: {str(e)}&quot;
        await ctx.send_message(error_msg)</code></div>

            <h3>8.4. Optimizaci√≥n de Workflows Paralelos</h3>

            <div class="component-grid">
                <div class="component-card">
                    <h4>‚ö° Balanceo de Carga</h4>
                    <p>Aseg√∫rate de que los executors paralelos tengan tiempos de ejecuci√≥n similares para maximizar la eficiencia.</p>
                    <p><strong>Evitar:</strong> Un executor tarda 1s, otros tardan 20s cada uno (el beneficio de paralelizaci√≥n se reduce).</p>
                </div>

                <div class="component-card">
                    <h4>üéØ N√∫mero de Paralelos</h4>
                    <p>No exageres el paralelismo. M√°s executors paralelos = m√°s recursos.</p>
                    <p><strong>Recomendaci√≥n:</strong> 2-5 executors paralelos es √≥ptimo para la mayor√≠a de casos.</p>
                </div>

                <div class="component-card">
                    <h4>üìä Monitoreo</h4>
                    <div class="code-block"><code>print(f&quot;[{executor_id}] Iniciando...&quot;)
start = time.time()
result = await agent.run(data)
elapsed = time.time() - start
print(f&quot;[{executor_id}] Completado en {elapsed:.2f}s&quot;)</code></div>
                    <p>Rastrea tiempos de ejecuci√≥n para identificar cuellos de botella.</p>
                </div>
            </div>

            <h3>8.5. Patrones de Workflow Recomendados</h3>

            <div class="diagram-container">
                <div class="diagram-title">üîÄ Patrones Comunes de Workflows Paralelos</div>

                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #f5576c; margin-bottom: 15px;">‚úÖ Scatter-Gather (Este Ejemplo)</h4>
                    <div style="text-align: center; margin: 15px 0;">
                        Input ‚Üí Distribuir ‚Üí [A, B, C] ‚Üí Agregar ‚Üí Output
                    </div>
                    <p><strong>Uso:</strong> Recopilar informaci√≥n de m√∫ltiples fuentes y combinarla</p>
                    <p><strong>Ejemplos:</strong> B√∫squedas, validaciones, an√°lisis multi-aspecto</p>
                </div>

                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #f5576c; margin-bottom: 15px;">‚úÖ Map-Reduce</h4>
                    <div style="text-align: center; margin: 15px 0;">
                        Lista ‚Üí Map(Procesar cada elemento) ‚Üí Reduce(Combinar) ‚Üí Resultado
                    </div>
                    <p><strong>Uso:</strong> Procesar muchos elementos independientemente y combinar resultados</p>
                    <p><strong>Ejemplos:</strong> Procesamiento por lotes, an√°lisis de m√∫ltiples documentos</p>
                </div>

                <div style="background: white; padding: 20px; border-radius: 8px;">
                    <h4 style="color: #f5576c; margin-bottom: 15px;">‚úÖ Pipeline con Etapas Paralelas</h4>
                    <div style="text-align: center; margin: 15px 0;">
                        A ‚Üí [B, C] ‚Üí D ‚Üí [E, F] ‚Üí G
                    </div>
                    <p><strong>Uso:</strong> Combinar secuencial y paralelo en el mismo workflow</p>
                    <p><strong>Ejemplos:</strong> Pipelines complejos con m√∫ltiples fases de paralelizaci√≥n</p>
                </div>
            </div>

            <!-- Resumen Final -->
            <h2>üéØ Resumen Final</h2>

            <div class="success-box">
                <h3 style="margin-top: 0;">Conceptos Clave Aprendidos:</h3>
                <ol>
                    <li><strong>Fan-Out:</strong> Distribuir datos de 1 executor a N executors que se ejecutan en paralelo</li>
                    <li><strong>Fan-In:</strong> Agregar resultados de N executors en un solo executor (recibe <span class="highlight">list[str]</span>)</li>
                    <li><strong>Ejecuci√≥n Paralela:</strong> Los executors en la fase fan-out trabajan simult√°neamente, no secuencialmente</li>
                    <li><strong>WorkflowBuilder Paralelo:</strong> Usar <span class="highlight">.add_fan_out_edges()</span> y <span class="highlight">.add_fan_in_edges()</span></li>
                    <li><strong>Ventaja de Performance:</strong> Reducir tiempo de ejecuci√≥n cuando las tareas son independientes</li>
                    <li><strong>5 Agentes Especializados:</strong> Location Selector ‚Üí [Destination, Weather, Cuisine] ‚Üí Itinerary Planner</li>
                </ol>
            </div>

            <div class="parallel-box">
                <h3 style="margin-top: 0;">üöÄ Ventaja Principal del Workflow Paralelo:</h3>
                <p style="font-size: 1.1em; margin-bottom: 15px;">
                    En lugar de esperar a que cada agente termine uno por uno (secuencial),
                    <strong>m√∫ltiples agentes trabajan al mismo tiempo</strong>, reduciendo significativamente
                    el tiempo total de ejecuci√≥n. Perfecto para recopilar informaci√≥n de m√∫ltiples fuentes independientes.
                </p>
            </div>

            <div class="info-box">
                <h3 style="margin-top: 0;">Pr√≥ximos Pasos Sugeridos:</h3>
                <ul>
                    <li>üîÄ Implementar workflows <strong>condicionales</strong> (if/else en el flujo)</li>
                    <li>üîÅ Implementar workflows con <strong>loops</strong> (iteraci√≥n sobre datos)</li>
                    <li>üéõÔ∏è Combinar workflows secuenciales y paralelos en un <strong>pipeline h√≠brido</strong></li>
                    <li>üìä Agregar <strong>m√©tricas y observabilidad</strong> para medir tiempos de ejecuci√≥n</li>
                    <li>üõ†Ô∏è Agregar <strong>herramientas personalizadas</strong> a los agentes (b√∫squeda web, APIs, etc.)</li>
                    <li>‚ö†Ô∏è Implementar <strong>manejo de errores robusto</strong> en executors paralelos</li>
                    <li>üîß Crear un <strong>patr√≥n supervisor</strong> que decida din√°micamente qu√© agentes usar</li>
                </ul>
            </div>

            <!-- Tabla de Referencia R√°pida -->
            <h2>üìö Referencia R√°pida: Workflow Paralelo</h2>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Descripci√≥n</th>
                        <th>C√≥digo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Fan-Out</strong></td>
                        <td>1 ‚Üí N (distribuci√≥n paralela)</td>
                        <td><code>.add_fan_out_edges(A, [B,C,D])</code></td>
                    </tr>
                    <tr>
                        <td><strong>Fan-In</strong></td>
                        <td>N ‚Üí 1 (agregaci√≥n)</td>
                        <td><code>.add_fan_in_edges([B,C,D], E)</code></td>
                    </tr>
                    <tr>
                        <td><strong>Input Fan-In</strong></td>
                        <td>Lista de resultados</td>
                        <td><code>results: list[str]</code></td>
                    </tr>
                    <tr>
                        <td><strong>Combinar Resultados</strong></td>
                        <td>Unir lista en string</td>
                        <td><code>combined = "\n\n".join(results)</code></td>
                    </tr>
                    <tr>
                        <td><strong>Crear 5 Agentes</strong></td>
                        <td>Cierre manual de recursos</td>
                        <td><code>client, agent = await create_and_initialize_agent(...)<br>clients.append(client)</code></td>
                    </tr>
                    <tr>
                        <td><strong>Cerrar Clientes</strong></td>
                        <td>Limpieza en finally</td>
                        <td><code>for client in clients:<br>    await client.__aexit__(None, None, None)</code></td>
                    </tr>
                </tbody>
            </table>

            <div class="warning-box" style="margin-top: 30px;">
                <strong>‚ö†Ô∏è Recordatorio Importante:</strong>
                <p>Los workflows paralelos son m√°s eficientes pero tambi√©n m√°s complejos. √ösalos cuando:</p>
                <ul>
                    <li>Las tareas son verdaderamente <strong>independientes</strong></li>
                    <li>El <strong>rendimiento</strong> es una prioridad</li>
                    <li>Necesitas <strong>agregar informaci√≥n</strong> de m√∫ltiples fuentes</li>
                </ul>
                <p>Para tareas secuenciales donde una depende de la otra, usa workflows secuenciales (012/013).</p>
            </div>
        </div>

        <div class="footer">
            <h3>üåê Documentaci√≥n del Workflow Paralelo</h3>
            <p>Script: <strong>014_parallel-workflow.py</strong></p>
            <p>Microsoft Agent Framework + Azure AI Foundry</p>
            <p>5 Agentes | Fan-Out | Fan-In | Ejecuci√≥n Paralela</p>
            <p style="margin-top: 15px; opacity: 0.8;">
                Generado autom√°ticamente | ¬© 2025
            </p>
        </div>
    </div>
</body>
</html>
